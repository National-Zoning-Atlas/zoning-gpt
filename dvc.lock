schema: '2.0'
stages:
  generate_dataset:
    cmd: python maxdumas/generate_dataset.py
    deps:
    - path: data/names_all_towns.json
      md5: 0013040cfeb0f4f23a35a94cae9f2950
      size: 2665
    - path: data/textract_dataset
      md5: 8d59315d9f3f21ddaab194db92db4d9e.dir
      size: 8120123951
      nfiles: 181
    - path: maxdumas/generate_dataset.py
      md5: 822d58780b8128d427872c5ac4bf6459
      size: 4673
    params:
      params.yaml:
        generate_dataset.seed: 42
        generate_dataset.test_split_frac: 0.3
    outs:
    - path: data/hf_dataset
      md5: 0057d2cb5fa96c6398ac1321ee8c4d99.dir
      size: 3618776812
      nfiles: 13
    - path: data/parquet_dataset
      md5: f709624dca0e132c4d0d54fe8834d9f7.dir
      size: 2207759780
      nfiles: 176
  upload_zoning_docs:
    cmd: bash maxdumas/upload_zoning_docs.sh
    deps:
    - path: data/orig-documents
      md5: b208d6a5c83a0ee2ea6866545fddf26b.dir
      size: 1004547167
      nfiles: 181
    - path: maxdumas/upload_zoning_docs.sh
      md5: 4bc9fb2d649525a0c3928fe4f7bc2307
      size: 316
    outs:
    - path: data/orig_documents_s3_manifest.json
      md5: 897ea14dfed07ed31455e60dc08c51c4
      size: 9670
  extract_text:
    cmd: python maxdumas/extract_text.py
    deps:
    - path: data/orig_documents_s3_manifest.json
      md5: 897ea14dfed07ed31455e60dc08c51c4
      size: 9670
    - path: maxdumas/extract_text.py
      md5: d955fa346713902c168c62b455b460a7
      size: 2866
    params:
      params.yaml:
        extract_text.orig_document_s3_bucket: cornell-mfd64
    outs:
    - path: data/textract_dataset
      md5: 8d59315d9f3f21ddaab194db92db4d9e.dir
      size: 8120123951
      nfiles: 181
